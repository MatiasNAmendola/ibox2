/*! iBox v2.0.0 ~ (c) 2013 Max Zhang, https://github.com/maxzhang/ibox2 */
(function(t){var e=Array.prototype.slice,i=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"],n=[],s=function(){},r=function(t){s.prototype=t;var e=new s;return s.prototype=null,e},o=function(t,e){if(t&&e&&"object"==typeof e){var n,s,r;for(n in e)t[n]=e[n];if(i)for(s=i.length;s--;)r=i[s],e.hasOwnProperty(r)&&(t[r]=e[r])}},a=function(){};o(a,{$isClass:!0,extend:function(t){var e,i,n,s=t.prototype;if(i=this.prototype=r(s),this.superclass=i.superclass=s,!t.$isClass){e=a.prototype;for(n in e)n in i&&(i[n]=e[n])}},addStatics:function(t){var e,i;for(i in t)t.hasOwnProperty(i)&&(e=t[i],this[i]=e);return this},addMembers:function(t){var e,n,s,r,o=this.prototype,a=[];for(s in t)a.push(s);for(i&&a.push.apply(a,i),e=0,n=a.length;n>e;e++)s=a[e],t.hasOwnProperty(s)&&(r=t[s],"function"!=typeof r||r.$isClass||(r.$owner=this,r.$name=s),o[s]=r);return this},implement:function(){this.addMembers.apply(this,arguments)}}),o(a.prototype,{$isInstance:!0,callParent:function(t){var i,s=(i=this.callParent.caller)&&(i=i.$owner?i:i.caller)&&i.$owner.superclass[i.$name];return s.apply(this,e.call(t,0)||n)},constructor:function(){return this}}),t.BaseKlass=a})(window),function(t){var e=t.BaseKlass,i=function(){function t(){return this.constructor.apply(this,arguments)||null}return t},n=function(t,i){var n,s,r,o=e.prototype;if(n=i&&i!==Object?i:e,s=n.prototype,!n.$isClass)for(r in o)s[r]||(s[r]=o[r]);t.extend(n)},s={define:function(t,s){var r,o;t||s?s||(s=t,t=e):(t=e,s={}),r=i();for(o in e)r[o]=e[o];return s.statics&&(r.addStatics(s.statics),delete s.statics),n(r,t),r.addMembers(s),r}};t.Klass=s}(window),function(t){var e=t.navigator,i=e.userAgent,n=i.match(/(Android)[\s\/]+([\d\.]+)/),s=i.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),r=i.match(/(Windows\s+Phone)\s([\d\.]+)/),o=/WebKit\/[\d.]+/i.test(i),a=s?e.standalone?o:/Safari/i.test(i)&&!/CriOS/i.test(i)&&!/MQQBrowser/i.test(i):!1,d={},l=Object.prototype.toString,h=Array.prototype.slice;n&&(d.android=!0,d.version=n[2]),s&&(d.ios=!0,d.version=s[2].replace(/_/g,"."),d.ios7=/^7/.test(d.version),"iPad"===s[1]?d.ipad=!0:"iPhone"===s[1]?(d.iphone=!0,d.iphone5=568==t.screen.height):"iPod"===s[1]&&(d.ipod=!0)),r&&(d.wp=!0,d.version=r[2],d.wp8=/^8/.test(d.version));var c={BLANK_IMAGE:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",os:d,isMobile:function(){return d.ios||d.android||d.wp},isWebkit:o,isSafari:a,noop:function(){},isDefined:function(t){return t!==void 0},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isObject:"[object Object]"===l.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===l.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===l.call(t)},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===l.call(t)},isFunction:function(t){return"[object Function]"===l.call(t)},proxy:function(t,e){return function(){return t.apply(e,arguments)}},createOrientationChangeProxy:function(e,i){return function(){clearTimeout(i.orientationChangedTimeout);var n=h.call(arguments,0);i.orientationChangedTimeout=setTimeout(c.proxy(function(){var s=t.orientation;s!=i.lastOrientation&&e.apply(i,n),i.lastOrientation=s},i),d.android?300:50)}},removeElement:function(){var t=h.call(arguments,0);t.forEach(function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})},addClass:function(t,e){var i,n,s,r;if(i=(e||"").match(/\S+/g)||[],n=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(/[\t\r\n]/g," "):" ")){for(r=0;s=i[r++];)0>n.indexOf(" "+s+" ")&&(n+=s+" ");t.className=n.trim()}},removeClass:function(t,e){var i,n,s,r;if(i=(e||"").match(/\S+/g)||[],n=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(/[\t\r\n]/g," "):" ")){for(r=0;s=i[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");t.className=n.trim()}},parsePx:function(t){return t?parseInt(t.replace(/[^\d]/g,""),10):0},getComputedSize:function(e,i){var n,s,r,o,a,d,l=t.getComputedStyle(e,null);return c.isDefined(i)?(c.isObject(i)||(i={width:i}),a=i.width,d=i.height,c.isDefined(a)&&(n=a-c.parsePx(l.marginLeft)-c.parsePx(l.marginRight),r=n-c.parsePx(l.paddingLeft)-c.parsePx(l.paddingRight)-c.parsePx(l.borderLeftWidth)-c.parsePx(l.borderRightWidth)),c.isDefined(d)&&(s=d-c.parsePx(l.marginTop)-c.parsePx(l.marginBottom),o=s-c.parsePx(l.paddingTop)-c.parsePx(l.paddingBottom)-c.parsePx(l.borderTopWidth)-c.parsePx(l.borderBottomWidth))):(n=e.offsetWidth,s=e.offsetHeight,r=n-c.parsePx(l.paddingLeft)-c.parsePx(l.paddingRight)-c.parsePx(l.borderLeftWidth)-c.parsePx(l.borderRightWidth),o=s-c.parsePx(l.paddingTop)-c.parsePx(l.paddingBottom)-c.parsePx(l.borderTopWidth)-c.parsePx(l.borderBottomWidth),a=n+c.parsePx(l.marginLeft)+c.parsePx(l.marginRight),d=s+c.parsePx(l.marginTop)+c.parsePx(l.marginBottom)),{width:0>n?0:n,height:0>s?0:s,innerWidth:0>r?0:r,innerHeight:0>o?0:o,outerWidth:0>a?0:a,outerHeight:0>d?0:d}},vendor:function(){var t=document.createElement("div").style,e=function(){for(var e,i="t,webkitT,MozT,msT,OT".split(","),n=0,s=i.length;s>n;n++)if(e=i[n]+"ransform",e in t)return i[n].substr(0,i[n].length-1);return!1}(),i=e?"-"+e.toLowerCase()+"-":"",n=function(t){return""===e?t:(t=t.charAt(0).toUpperCase()+t.substr(1),e+t)},s=n("transform"),r=n("transition"),o=n("transitionProperty"),a=n("transitionDuration"),d=n("transformOrigin"),l=n("transitionTimingFunction"),h=n("transitionDelay"),c=function(){return"webkit"==e||"O"===e?e.toLowerCase()+"TransitionEnd":"transitionend"}();return t=null,{propVendor:e,cssVendor:i,transform:s,transition:r,transitionProperty:o,transitionDuration:a,transformOrigin:d,transitionTimingFunction:l,transitionDelay:h,transitionEndEvent:c}}(),listenTransition:function(t,e,i){var n=this,s=c.vendor.transitionEndEvent,r=function(){t.transitionTimer&&clearTimeout(t.transitionTimer),t.transitionTimer=null,t.removeEventListener(s,r,!1),i&&i.call(n)};t.addEventListener(s,r,!1),t.transitionTimer=setTimeout(r,e+100)},queryFunction:function(e){var i;return e&&c.isString(e)&&(i=t,e=e.split("."),e.forEach(function(t){i=i[t]})),i||c.noop}};t.iBoxUtils=c}(window),function(t){var e=t.iBoxUtils,i=Array.prototype.slice,n=Klass.define({statics:{version:"2.0.0"},baseCSSPrefix:"ibox",offsets:{top:0,bottom:0},constructor:function(i,n){e.isObject(i)&&(n=i,i=null),i=i||document.body,n=n||{};for(var s in n)this[s]=n[s];this.views={},this.render(i),this.scrollTop(),this.resize();var r=this.body.children[0];r&&this.slide({el:r,silent:!0}),this.resizeProxy=e.proxy(this.resize,this),this.onOrientationChangedProxy=e.createOrientationChangeProxy(this.onOrientationChanged,this),t.addEventListener("resize",this.resizeProxy,!1),t.addEventListener("orientationchange",this.onOrientationChangedProxy,!1)},render:function(t){if(!this.rendered){this.rendered=!0;var i=this.baseCSSPrefix,n=this.baseCSSPrefix+"-header",s=this.baseCSSPrefix+"-body";this.el=e.isString(t)?document.querySelector(t):t,e.addClass(this.el,i),this.cls&&e.addClass(this.el,this.cls),this.header=this.el.querySelector("."+n),this.header||(this.header=document.createElement("div"),this.el.appendChild(this.header)),e.addClass(this.header,n),this.headerCls&&e.addClass(this.header,this.headerCls),this.body=this.el.querySelector("."+s),this.body||(this.body=document.createElement("div"),this.el.appendChild(this.body)),e.addClass(this.body,s),this.bodyCls&&e.addClass(this.body,this.bodyCls),this.onRender()}},onRender:e.noop,resize:function(){var i,n,s,r,o,a=t.innerWidth,d=t.innerHeight,l=t.screen.width,h=t.screen.height,c=this.offsets.top,u=this.offsets.bottom,p=a;c=e.isFunction(c)?c():c,u=e.isFunction(u)?u():u,e.isSafari&&!e.os.ios7?(i=t.navigator.standalone?d:(0===t.orientation?h-44:l-32)-20,i=d>i?d:i):i=d,i=i-c-u,(p!=this.lastWidth||i!=this.lastHeight)&&(this.lastWidth=p,this.lastHeight=i,s=e.getComputedSize(this.el,{width:p,height:i}),n=e.getComputedSize(this.header).outerHeight,r=e.getComputedSize(this.header,{width:s.innerWidth,height:n}),o=e.getComputedSize(this.body,{width:s.innerWidth,height:s.innerHeight-n}),this.el.style.cssText="top:"+c+"px;width:"+s.innerWidth+"px;height:"+s.innerHeight+"px;",this.header.style.cssText="top:0px;width:"+r.innerWidth+"px;height:"+r.innerHeight+"px;",this.body.style.cssText="top:"+n+"px;width:"+o.innerWidth+"px;height:"+o.innerHeight+"px;",this.lastView&&!this.sliding&&this.lastView.resize(),this.onResize(s,r,o))},onResize:e.noop,slide:function(t,s,r,o){var a,d=this,l=i.call(arguments,0),h=l.length,c=d.lastView;d.scrollTop(),t&&(2!=h||e.isBoolean(s)||(o=s,s=!1),3!=h||e.isBoolean(r)||(o=r,r=!1),t=e.isString(t)?{id:t}:t,t.id=t.id&&(e.isString(t.id)?t.id:t.id.getAttribute("id")),r=r===!0,s=s===!0,o=o||{},a=d.views[t.id],a||(a=new n.View(d.body,d.header,t),d.views[a.id]=a),c==a||d.sliding||(d.sliding=!0,c?(o.beforeHide&&o.beforeHide(c),c.slide(s,"out",r,function(){o.onHide&&o.onHide(c),c.single!==!0&&(c.destroy(),delete d.views[c.id])})):r=!0,o.beforeShow&&o.beforeShow(a),a.slide(s,"in",r,function(){d.lastView=a,o.onShow&&o.onShow(a),d.sliding=!1,d.resize()})))},scrollTop:function(){e.isSafari&&t.scrollTo(0,1)},onOrientationChanged:function(){this.scrollTop(),this.resize()},destroy:function(){if(!this.destroyed){this.destroyed=!0,this.beforeDestroy(),t.removeEventListener("resize",this.resizeProxy,!1),t.removeEventListener("orientationchange",this.onOrientationChangedProxy,!1);for(var i in this.view)this.views[i].destroy(),delete this.views[i];this.views=this.lastView=null,e.removeElement(this.header,this.body),this.el=this.header=this.body=null,this.onDestroy()}},beforeDestroy:e.noop,onDestroy:e.noop});(function(){function t(t){for(var e,i=document.querySelector("meta[name=viewport]"),n=i.content,s=n.split(","),r=[],o="width",a=0,d=s.length;d>a;a++)e=s[a].trim().split("="),e[0]==o?r.push(o+"="+t):r.push(e[0]+"="+e[1]);n=r.join(", "),-1==n.indexOf(o+"=")&&(n=o+"="+t+", "+n),i.content=n}e.os.iphone5?t("320.1"):t("device-width")})(),"function"==typeof define&&(define.amd||seajs)&&define("ibox",[],function(){return n}),t.iBox=n}(window),function(t){var e=t.IScroll,i=t.iBoxUtils,n=Klass.define({statics:{idSeed:1e3},iscroll:{scrollX:!1,scrollY:!0,preventDefault:!0,click:!0},constructor:function(t,e,i){i=i||{};for(var n in i)this[n]=i[n];this.headerKlass=this.headerKlass||iBox.GeneralHeader,this.ct=t,this.headerCt=e,this.render()},makeId:function(){return"ibox-view-gen"+ ++n.idSeed},render:function(){this.rendered||(this.rendered=!0,this.el?(this.el=i.isString(this.el)?document.querySelector(this.el):this.el,this.scroller=this.el.children[0],this.id=this.el.getAttribute("id"),this.single="false"!==this.el.getAttribute("data-single"),this.onRender=i.queryFunction(this.el.getAttribute("data-render"))):(this.el=document.createElement("div"),this.scroller=document.createElement("div"),this.el.appendChild(this.scroller),this.el.style.cssText="display:none;",this.ct.appendChild(this.el)),this.id||(this.id=this.makeId()),i.addClass(this.scroller,"scroller"),this.el.setAttribute("id",this.id),i.addClass(this.el,"ibox-view"),this.cls&&i.addClass(this.el,this.cls),i.isString(this.header)&&(this.header={title:this.header}),this.header=new this.headerKlass(this.id,this.headerCt,this.header),this.iscroll!==!1&&e&&(this.iscroll=new e(this.el,this.iscroll)),this.onRender())},onRender:i.noop,slide:function(t,e,n,s){var r,o,a,d,l=this,h=l.ct,c=l.el,u=i.vendor.cssVendor,p=i.getComputedSize(h),f=i.getComputedSize(c,{width:p.outerWidth,height:p.outerHeight}),y=1,m=80,g=350,x=50;l.header.slide(t,e,n),("in"==e&&!t||"out"==e&&t)&&(y=2,a="-5px 0 20px #dddddd"),o="display:block;z-index:"+y+";opacity:"+("in"==e?1:.7)+";"+u+"box-shadow:"+a+";width:"+f.innerWidth+"px;height:"+f.innerHeight+"px;"+u+"transform:translate3d("+("in"==e?"0":t?p.width:-m)+"px,0px,0px);"+(n===!0?"":u+"transition:"+u+"transform "+g+"ms,opacity "+g+"ms;"),d=function(){"in"!=e&&c?c.style.display="none":"in"==e&&l.iscroll&&l.iscroll.refresh(),s&&s.call(l,f),l.onSlide()},n!==!0?("in"==e&&(r="display:block;z-index:"+y+";opacity:"+(t?.5:1)+";"+u+"box-shadow:"+a+";width:"+f.innerWidth+"px;height:"+f.innerHeight+"px;"+u+"transform:translate3d("+(t?-m:p.width)+"px,0px,0px);",c.style.cssText=r),i.listenTransition(c,g+x,d),setTimeout(function(){c.style.cssText=o},x)):(c.style.cssText=o,d())},onSlide:i.noop,resize:function(){var t=this;t.slide(!1,"in",!0,function(e){t.onResize(e)})},onResize:i.noop,destroy:function(){this.destroyed||(this.destroyed=!0,this.beforeDestroy(),this.header.destroy(),this.header=null,this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),i.removeElement(this.el),this.el=this.ct=this.headerCt=null,this.onDestroy())},beforeDestroy:i.noop,onDestroy:i.noop});iBox.View=n}(window),function(t){var e=t.iBoxUtils;iBox.Header=Klass.define({constructor:function(t,e,i){i=i||{};for(var n in i)this[n]=i[n];this.viewId=t,this.ct=e,this.render()},render:function(){this.rendered||(this.rendered=!0,this.doRender(),this.onRender())},doRender:e.noop,onRender:e.noop,slide:function(t,e,i,n){var s=this;s.doSlide(t,e,i,function(){n&&n.call(s),s.onSlide()})},doSlide:e.noop,onSlide:e.noop,resize:function(){var t=this;t.slide(!1,"in",!0,function(e){t.onResize(e)})},onResize:e.noop,destroy:function(){this.destroyed||(this.destroyed=!0,this.beforeDestroy(),this.doDestroy(),this.ct=null,this.onDestroy())},doDestroy:e.noop,beforeDestroy:e.noop,onDestroy:e.noop})}(window),function(t){var e=t.navigator.msPointerEnabled,i=t.iBoxUtils;iBox.GeneralHeader=Klass.define(iBox.Header,{doRender:function(){var t,e=this.title;e?(e=i.isString(e)?{text:e}:e,t=document.createElement("div"),t.innerHTML="<div>"+e.text+"</div>",t.className="button title"+(e.cls?" "+e.cls:""),t.setAttribute("data-view",this.viewId),t.style.cssText="display:none;",this.ct.appendChild(t),this.title=t,t=null):this.title=this.ct.querySelector('div.title[data-view="'+this.id+'"]'),this.renderButton(this.leftButton,!0),this.renderButton(this.rightButton,!1)},renderButton:function(t,n){var s,r,o,a=n?"left":"right",d=a+"Button",l=a+"ButtonHighlightHandler",h=a+"ButtonHandler";t?(t=i.isString(t)?{text:t}:t,r=t.handler,s=document.createElement("div"),s.innerHTML=(n?'<img src="'+(t.icon||i.BLANK_IMAGE+'" class="back"')+" />":"")+"<div>"+t.text+"</div>",s.className="button "+a+(t.cls?" "+t.cls:""),s.style.cssText="display:none;",s.setAttribute("data-view",this.viewId),this.ct.appendChild(s),this[d]=o=s,s=null):(this[d]=o=this.ct.querySelector("div."+a+'[data-view="'+this.id+'"]'),o&&(r=i.queryFunction(o.getAttribute("data-handler")))),r&&(i.isMobile()?(this[l]=this.createButtonHandler(o),this[h]=i.proxy(t.handler,this),o.addEventListener(e?"MSPointerDown":"touchstart",this[l],!1),o.addEventListener(e?"MSPointerUp":"touchend",this[h],!1)):(this[h]=this.createButtonHandler(o,t.handler),o.addEventListener("click",this[h],!1)))},createButtonHandler:function(t,e){var n=this;return function(){i.addClass(t,"highlighted"),e&&e.call(n)}},doSlide:function(t,e,n,s){var r,o,a,d,l,h,c,u,p,f,y,m,g,x,v,b=this,w=i.vendor.cssVendor,S=t?"right":"left",C=b.leftButton,T=b.rightButton,P=b.title,A=i.getComputedSize(b.ct).innerWidth,B=70,E=350,z=300,H=50;"in"==e&&(C&&(C.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);"),T&&(T.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);"),P&&(P.style.cssText="display:block;"+w+"transform:translate3d(-1000px,-1000px,0px);")),a=C?i.getComputedSize(C).outerWidth:0,d=T?i.getComputedSize(T).outerWidth:0,o=P?i.getComputedSize(P).outerWidth:0,a+d+o>A&&(a=A-o-d),B>a&&(a=B),l=(A-o)/2,l=l+o+d>A?(A-o-d)/2:l,l=a>l?a:l,C&&(i.removeClass(C,"highlighted"),r=C.querySelector("div"),h=i.getComputedSize(C,a).innerWidth,c=i.getComputedSize(r,h).innerWidth,m="display:block;width:"+h+"px;opacity:"+("in"==e?"1":"0")+";"+(n===!0?"":w+"transition:"+"opacity "+z+"ms;"),g="width:"+c+"px;"+w+"transform:translate3d("+("in"==e?0:"left"==S?-a:l)+"px,0px,0px);"+(n===!0?"":""+w+"transition:"+w+"transform "+E+"ms;"),n!==!0?("in"==e&&(u="display:block;width:"+h+"px;opacity:0;",p="width:"+c+"px;"+w+"transform:translate3d("+("left"==S?l:-a)+"px,0px,0px);",C.style.cssText=u,r.style.cssText=p),i.listenTransition(C,E+H,function(){"in"!=e&&b.leftButton&&(b.leftButton.style.display="none")}),setTimeout(function(){C.style.cssText=m,r.style.cssText=g},H)):(C.style.cssText=m,r.style.cssText=g,"in"!=e&&(C.style.display="none"))),T&&(i.removeClass(T,"highlighted"),x="display:block;opacity:"+("in"==e?"1":"0")+";"+(n===!0?"":w+"transition:opacity "+z+"ms;"),n!==!0?("in"==e&&(f="display:block;opacity:0;",T.style.cssText=f),i.listenTransition(T,E+H,function(){"in"!=e&&b.rightButton&&(b.rightButton.style.display="none")}),setTimeout(function(){T.style.cssText=x},H)):(T.style.cssText=x,"in"!=e&&(T.style.display="none"))),P&&(v="display:block;opacity:"+("in"==e?"1":"0")+";"+w+"transform:translate3d("+("in"==e?l:"left"==S?30:A)+"px,0px,0px);"+(n===!0?"":w+"transition:"+w+"transform "+E+"ms,opacity "+z+"ms;"),n!==!0?("in"==e&&(y="display:block;opacity:0;"+w+"transform:translate3d("+("left"==S?A-o/2:0)+"px,0px,0px);",P.style.cssText=y),i.listenTransition(P,E+H,function(){"in"!=e&&b.title&&(b.title.style.display="none"),s&&s.call(b)}),setTimeout(function(){P.style.cssText=v},H)):(P.style.cssText=v,"in"!=e&&(P.style.display="none"),s&&s.call(b)))},doDestroy:function(){this.title&&(i.removeElement(this.title),this.title=null),this.destroyButton(!0),this.destroyButton(!1)},destroyButton:function(t){var n=t?"left":"right",s=n+"Button",r=n+"ButtonHighlightHandler",o=n+"ButtonHandler",a=this[s];a&&(i.isMobile()?(a.removeEventListener(e?"MSPointerDown":"touchstart",this[r],!1),a.removeEventListener(e?"MSPointerUp":"touchend",this[o],!1)):a.removeEventListener("click",this[o],!1),i.removeElement(a),this[s]=null)}})}(window);